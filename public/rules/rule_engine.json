{
  "version": "0.4.1",
  "updated_at": "2026-02-05",
  "notes": [
    "checklists.json + rule_engine.json 분리 구조",
    "확장 체크리스트 항목 자동 판정 일부 추가",
    "checklists.json에 존재하는 항목은 여기에도 id가 있어야 enriched/judge에서 unknown이 줄어듦"
  ],
  "default_conditional": [
    {
      "id": "road_access",
      "rule_set": {
        "strategy": "first_match",
        "default_result": "need_input",
        "default_message": "❓ 추가 입력이 필요해요."
      },
      "auto_rules": [
        {
          "id": "deny_narrow_road",
          "priority": 100,
          "when": { "op": "lt", "key": "road_width_m", "value": 4 },
          "result": "deny",
          "message": "도로 폭 4m 미만이면 건축 제한 가능성 큼"
        },
        {
          "id": "allow_ok_road",
          "priority": 10,
          "when": { "op": "gte", "key": "road_width_m", "value": 4 },
          "result": "allow",
          "message": "도로 폭 4m 이상 기준 충족"
        }
      ]
    },

    {
      "id": "parking",
      "rule_set": {
        "strategy": "first_match",
        "default_result": "conditional",
        "default_message": "⚠️ 주차조례 기준 수동 확인 필요"
      },
      "auto_rules": []
    },

    {
      "id": "daylight",
      "rule_set": {
        "strategy": "first_match",
        "default_result": "conditional",
        "default_message": "⚠️ 일조/사선 수동 검토 필요"
      },
      "auto_rules": [
        {
          "id": "need_input_height_setback",
          "priority": 90,
          "when_any": [
            { "op": "missing", "key": "height_m" },
            { "op": "missing", "key": "setback_m" }
          ],
          "result": "need_input",
          "message": "❓ 추가 입력이 필요해요."
        }
      ]
    },

    {
      "id": "fire_escape",
      "rule_set": {
        "strategy": "first_match",
        "default_result": "conditional",
        "default_message": "⚠️ 피난/방화 추가 검토 필요"
      },
      "auto_rules": [
        {
          "id": "need_input_fire",
          "priority": 100,
          "when_any": [
            { "op": "missing", "key": "floors" },
            { "op": "missing", "key": "gross_area_m2" }
          ],
          "result": "need_input",
          "message": "❓ 추가 입력이 필요해요."
        },
        {
          "id": "conditional_high_risk",
          "priority": 80,
          "when_any": [
            { "op": "gte", "key": "floors", "value": 6 },
            { "op": "gte", "key": "gross_area_m2", "value": 2000 }
          ],
          "result": "conditional",
          "message": "⚠️ 피난/방화 기준 강화 가능성 큼"
        },
        {
          "id": "allow_low_risk",
          "priority": 10,
          "when_all": [
            { "op": "lt", "key": "floors", "value": 6 },
            { "op": "lt", "key": "gross_area_m2", "value": 2000 }
          ],
          "result": "allow",
          "message": "기본 기준 범위 내"
        }
      ]
    },

    {
      "id": "elevator",
      "rule_set": {
        "strategy": "first_match",
        "default_result": "conditional",
        "default_message": "⚠️ 승강기 설치 기준 수동 확인 필요"
      },
      "auto_rules": [
        {
          "id": "need_input_elevator",
          "priority": 100,
          "when": { "op": "missing", "key": "floors" },
          "result": "need_input",
          "message": "❓ 추가 입력이 필요해요."
        },
        {
          "id": "conditional_elevator",
          "priority": 50,
          "when": { "op": "gte", "key": "floors", "value": 6 },
          "result": "conditional",
          "message": "층수 기준으로 승강기 설치 가능성 큼"
        }
      ]
    },

    {
      "id": "accessibility",
      "rule_set": {
        "strategy": "first_match",
        "default_result": "conditional",
        "default_message": "⚠️ 장애인 편의시설 대상 여부 수동 확인 필요"
      },
      "auto_rules": [
        {
          "id": "need_input_accessibility",
          "priority": 100,
          "when": { "op": "missing", "key": "gross_area_m2" },
          "result": "need_input",
          "message": "❓ 추가 입력이 필요해요."
        },
        {
          "id": "conditional_accessibility",
          "priority": 10,
          "when": { "op": "gte", "key": "gross_area_m2", "value": 500 },
          "result": "conditional",
          "message": "규모 기준으로 편의시설 대상 가능성"
        }
      ]
    },

    {
      "id": "energy_plan",
      "rule_set": {
        "strategy": "first_match",
        "default_result": "conditional",
        "default_message": "⚠️ 에너지 관련 서류 대상 여부 확인 필요"
      },
      "auto_rules": [
        {
          "id": "need_input_energy",
          "priority": 100,
          "when": { "op": "missing", "key": "gross_area_m2" },
          "result": "need_input",
          "message": "❓ 추가 입력이 필요해요."
        },
        {
          "id": "conditional_energy",
          "priority": 10,
          "when": { "op": "gte", "key": "gross_area_m2", "value": 2000 },
          "result": "conditional",
          "message": "규모 기준으로 에너지계획 대상 가능성"
        }
      ]
    },

    {
      "id": "structure_fireproof",
      "rule_set": {
        "strategy": "first_match",
        "default_result": "conditional",
        "default_message": "⚠️ 구조/내화 성능 기준 수동 확인 필요"
      },
      "auto_rules": [
        {
          "id": "need_input_structure_fireproof",
          "priority": 100,
          "when_any": [
            { "op": "missing", "key": "floors" },
            { "op": "missing", "key": "gross_area_m2" }
          ],
          "result": "need_input",
          "message": "❓ 추가 입력이 필요해요."
        },
        {
          "id": "conditional_structure_fireproof",
          "priority": 10,
          "when_any": [
            { "op": "gte", "key": "floors", "value": 10 },
            { "op": "gte", "key": "gross_area_m2", "value": 8000 }
          ],
          "result": "conditional",
          "message": "규모/층수 기준으로 구조·내화 요구 강화 가능성"
        }
      ]
    },

    {
      "id": "district_plan",
      "rule_set": {
        "strategy": "first_match",
        "default_result": "conditional",
        "default_message": "⚠️ 지구단위계획 여부 확인 필요"
      },
      "auto_rules": []
    }
  ]
}
