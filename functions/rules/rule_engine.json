{
  "version": "0.3.1",
  "updated_at": "2026-02-03",
  "notes": [
    "checklists.json(입력/표시) + rule_engine.json(판정 로직) 분리 구조",
    "result 표준: allow | conditional | deny | need_input | unknown",
    "warn는 conditional로 서버에서 정규화",
    "priority 높은 rule부터 first_match 전략으로 판정"
  ],
  "default_conditional": [
    {
      "id": "road_access",
      "rule_set": {
        "strategy": "first_match",
        "default_result": "need_input",
        "default_message": "❓ 입력 필요: 도로 폭(m)"
      },
      "auto_rules": [
        {
          "id": "deny_narrow_road",
          "priority": 100,
          "when": { "op": "lt", "key": "road_width_m", "value": 4 },
          "result": "deny",
          "message": "도로 폭 4m 미만이면 건축법상 원칙적으로 제한 가능성이 큼(예외/현황도로/확폭 여부 등 추가 검토)"
        },
        {
          "id": "allow_ok_road",
          "priority": 10,
          "when": { "op": "gte", "key": "road_width_m", "value": 4 },
          "result": "allow",
          "message": "도로 폭 4m 이상으로 1차 기준 충족(세부 조건은 현장/지자체 확인)"
        }
      ]
    },

    {
      "id": "parking",
      "rule_set": {
        "strategy": "first_match",
        "default_result": "conditional",
        "default_message": "⚠️ 수동 검토 항목(지자체 주차조례/별표 기준 확인 필요)"
      },
      "auto_rules": [
        {
          "id": "need_input_if_missing",
          "priority": 90,
          "when": { "op": "missing", "key": "gross_area_m2" },
          "result": "need_input",
          "message": "❓ 입력 필요: 연면적(㎡)"
        }
      ]
    },

    {
      "id": "daylight",
      "rule_set": {
        "strategy": "first_match",
        "default_result": "conditional",
        "default_message": "⚠️ 수동 검토 항목(일조/사선은 법령·고시·조례 및 대지조건에 따라 달라짐)"
      },
      "auto_rules": [
        {
          "id": "need_input_height_setback",
          "priority": 90,
          "when_any": [
            { "op": "missing", "key": "height_m" },
            { "op": "missing", "key": "setback_m" }
          ],
          "result": "need_input",
          "message": "❓ 입력 필요: 건물 높이(m), 대지 경계 거리(m)"
        }
      ]
    },

    {
      "id": "fire_escape",
      "rule_set": {
        "strategy": "first_match",
        "default_result": "conditional",
        "default_message": "⚠️ 일부 자동 판정 가능하나 추가 검토 필요(용도/연면적/피난계단/방화구획 기준 확인)"
      },
      "auto_rules": [
        {
          "id": "need_input_fire",
          "priority": 100,
          "when_any": [
            { "op": "missing", "key": "floors" },
            { "op": "missing", "key": "gross_area_m2" }
          ],
          "result": "need_input",
          "message": "❓ 입력 필요: 층수, 연면적(㎡)"
        },
        {
          "id": "conditional_high_risk",
          "priority": 80,
          "when_any": [
            { "op": "gte", "key": "floors", "value": 6 },
            { "op": "gte", "key": "gross_area_m2", "value": 2000 }
          ],
          "result": "conditional",
          "message": "⚠️ 피난/방화 기준 강화 가능성 큼(피난계단/방화구획 등) — 용도·연면적·층수 기준 함께 확인"
        },
        {
          "id": "allow_low_risk",
          "priority": 10,
          "when_all": [
            { "op": "lt", "key": "floors", "value": 6 },
            { "op": "lt", "key": "gross_area_m2", "value": 2000 }
          ],
          "result": "allow",
          "message": "층수/연면적 기준으로는 상대적으로 요구가 완화될 가능성(단, 용도·특정 기준은 별도)"
        }
      ]
    }
  ]
}
